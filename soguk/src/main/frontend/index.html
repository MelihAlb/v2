<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ana Sayfa</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<header>
    <div class="header-left">
        <a id="search-btn" class="button">Ara</a>
    </div>
    <div class="header-center">
        <a href="index.html" class="logo-link">SOĞUK</a> <!-- Başlık bağlantısı eklendi -->
    </div>
    <div class="header-right">
        <div id="user-info" style="display: none;">
            <span id="user-name"></span>
            <button id="logout-btn" class="button logout-btn">Çıkış Yap</button>
            <button id="profile-btn">Profil</button>
        </div>
        <div id="guest-info">
            <a href="login.html" id="loginModal" class="button">Giriş Yap</a>
            <a href="register.html" class="button" id="signup-btn">Üye Ol</a>
        </div>
    </div>
</header>

<main>
    <ul id="topicList"></ul>
</main>

<button class="postT-button" onclick="window.location.href='PostTopic.html'">Başlık Oluştur</button>

<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <button class="close">&times;</button>
        </div>
        <div class="modal-body">
            <input type="text" id="searchQuery" placeholder="Arama terimini girin" />
            <button id="searchSubmit" class="modal-button">Ara</button>
        </div>
    </div>
</div>

<footer>
    <div id="authors-list">
        <h2>Yazarlar</h2>
        <ul id="authors">

        </ul>
    </div>
</footer>

<script src="app.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', function() {

        const searchBtn = document.getElementById('search-btn');
        const modal = document.getElementById('searchModal');
        const closeBtn = document.querySelector('.close');


        searchBtn.addEventListener('click', function() {
            modal.style.display = 'block';
        });


        closeBtn.addEventListener('click', function() {
            modal.style.display = 'none';
        });


        window.addEventListener('click', function(event) {
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        });


        const searchSubmit = document.getElementById('searchSubmit');
        searchSubmit.addEventListener('click', function() {
            const searchQuery = document.getElementById('searchQuery').value;
            if (searchQuery) {
                window.location.href = `searchResult.html?q=${encodeURIComponent(searchQuery)}`;
            }
        });
    });
</script>

<script>
    document.getElementById('profile-btn').addEventListener('click', function() {
        window.location.href = 'me.html';
    });
    document.addEventListener("DOMContentLoaded", function() {

        const authToken = localStorage.getItem('authToken');

        const userInfo = document.getElementById('user-info');
        const guestInfo = document.getElementById('guest-info');
        const userNameDisplay = document.getElementById('user-name');

        if (authToken) {

            userInfo.style.display = 'block';
            guestInfo.style.display = 'none';


            const nick = localStorage.getItem('nick');
            if (nick) {
                userNameDisplay.textContent = `Hoş Geldiniz, ${nick}`;
            }
        } else {

            userInfo.style.display = 'none';
            guestInfo.style.display = 'block';
        }

        const logoutBtn = document.getElementById('logout-btn');
        if (logoutBtn) {
            logoutBtn.addEventListener('click', function() {
                localStorage.removeItem('authToken');
                localStorage.removeItem('nick');
                window.location.href = 'login.html';
            });
        }
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        fetch('http://localhost:8080/users/nicks')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                const authorsList = document.getElementById('authors');
                authorsList.innerHTML = '';

                data.forEach(nick => {
                    const listItem = document.createElement('li');
                    listItem.textContent = nick; // Kullanıcı ismini ekle
                    authorsList.appendChild(listItem);
                });
            })
            .catch(error => console.error('Error:', error));
    });
</script>
</body>
</html>
